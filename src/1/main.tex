\chapter{Súčasné metódy nahrávania obrázkov}

Aby sa dali veci robiť lepšie a~efektívnejšie, je najprv potrebné preskúmať už vytvorené spôsoby a~uvedomiť si ich nedostatky. Zamedzí sa tak opakovaniu chýb.
  

\section{HTML tág <input\textgreater}

Historicky prvým spôsobom je nepárový tág \emph{<input type="file"\textgreater}. Objavil sa už v~roku 1997, keď konzorcium W3C vydalo štandard \emph{HTML 3.2} \cite{html32}. Umožňuje nahrávanie súborov a~teda aj obrázkov ako súčasť zaslaného formulára, a~teda sa vždy musí vyskytovať uprostred tágu <form\textgreater. Scénar nahrávania prebieha nasledovne:

\begin{figure}[!hbt]
	\centering
	\begin{tikzpicture}[node distance=.8cm, start chain=going right,]
		\node[punktchain, join] (input) {\emph{<input>} element};
		\node[punktchain, join] (modal) {Zvolenie obrázka z~modálneho okna};
		\node[punktchain, join, on chain=going below] (form-sending) {Odoslanie formulára};
		\node[punktchain, join, on chain=going left] (server-processing) {Spracovanie na~serveri};
	\end{tikzpicture}
	
	\caption{Schéma nahrávania obrázka pomocou \emph{<input>} elementu}
\end{figure}

\begin{enumerate}
	\item Užívateľ myšou klikne na~\emph{<input>} element
	\item Vyskočí modálne okno, z~ktorého užívateľ vyberie obrázok
	\item Užívateľ odošle formulár, obrázok je odoslaný na~server, kde je spracovaný
\end{enumerate}

Výhody tohto riešenia sú predovšetkým:
\begin{itemize}
	\item Natívna podpora v~prehliadačoch - nie sú potrebné žiadne ďalšie JavaScriptové súbory
	\item Jednoduché na~implementáciu
	\item Podpora \emph{drag&drop}
\end{itemize}


\section{FormData a~XMLHttpRequest}

\emph{XMLHttpRequest Level 2} pridáva nové rozhranie \emph{FormData}, ktoré umožňuje vytvoriť reprezentáciu formulára v~tvare kľúč-hodnota, čím umožňuje zaslať formulár pomocou \emph{XMLHttpRequest} \cite{MDN_Formdata}. \emph{XMLHttpRequest} je API, ktoré umožňuje prenášať dáta medzi~prehliadačom a~serverom bez~toho aby nastal refresh \cite{MDN_XMLHttpRequest}.

Vďaka \emph{FormData} je možné odstrániť limitáciu, kde \emph{<input type="file"\textgreater} musí byť vložený do~formulára (<form\textgreater). Použitím \emph{XMLHttpRequest} eventu \emph{onprogress} je možné sledovať proces nahrávania \cite{MDN_XMLHttpRequest_progress}. Scénar nahrávania môže vyzerať nasledovne:
\begin{enumerate}
	\item Užívateľ myšou klikne na~\emph{<input>} element
	\item Vyskočí modálne okno, z~ktorého užívateľ vyberie obrázok
	\item Obrázok sa odošle na~server, zatiaľ čo sleduje proces nahrávania. Keď je obrázok plne nahratý a~spracovaný, odošle sa jeho odkaz naspäť užívateľovi do~prehliadača.
	\item Užívateľovi sa zobrazí nahraný obrázok, pokiaľ s~ním nie je spokojný, postupuje od~bodu 1, ak je spokojný odošle formulár. V~tomto prípade nedochádza ku~žiadnej manipulácií s~obrázkom.
\end{enumerate}

Výhody tohto riešenia sú predovšetkým:
\begin{itemize}
	\item Nie je potrebné umiestnenie vo formulári
	\item Je možné zaslať obrázok na~pozadí, čo umožňuje využitie v~moderných webových aplikáciach, kde je refresh nežiadúci
	\item Počas nahrávania je možné zobraziť proces v~percentách
	\item Po~nahratí obrázka na~server, je možné obrázok užívateľovi zobraziť. A~teda ho vidí pred~potvrdením formulára
	\item Podpora \emph{drag&drop}
\end{itemize}

\begin{figure}[!ht]
	\centering
	\begin{tikzpicture}[node distance=.8cm, start chain=going below,]
		\node[punktchain, join] (input) {\emph{<input>} tág};
		\node[punktchain, join] (modal) {Modálne okno};
		\node[punktchain, join] (file-choose) {Zvolenie obrázka};
		\node[punktchain, join] (file-choose) {Odoslanie obrázka na~server};
		\node[punktchain, join, dashed, on chain=going right] (server-processing) {Spracovanie na~serveri};
		\node[punktchain, join, on chain=going below left] (server-processing) {Zobrazenie obrázka};
	\end{tikzpicture}
	
	\caption{Schéma nahrávania obrázka pomocou \emph{<input>} elementu v~kombinácií s~\emph{FormData} a~{XMLHttpRequest}}
\end{figure}


\section{Riešenia založené na~Adobe\textsuperscript{\tiny{\textregistered}} Flash\textsuperscript{\tiny{\textregistered}} a~Microsoft\textsuperscript{\tiny{\textregistered}} Silverlight\textsuperscript{\tiny{\textregistered}}}

V dobe písania tejto práce boli stále veľmi rozšírené riešenia založené na~technológií Adobe\textsuperscript{\tiny{\textregistered}} Flash\textsuperscript{\tiny{\textregistered}} (ďalej spomínaný už len ako Flash). Flash pôvodne navrhnutý pre~tvorbu multimediálneho obsahu - vektorovej grafiky, animácií, hier pre~prehliadač - sa stal populárnym aj na~tvorbu väčších aplikácií v~prehiadači, pracovanie so~vstupm z~webovej kamery či mikrofónu až po~prehrávanie videí a~zvuku.

O~niečo podobné sa pokúšal Microsoft\textsuperscript{\tiny{\textregistered}} s~technológiou Silverlight\textsuperscript{\tiny{\textregistered}} (ďalej len Silverlight). Obe technológie nepoužívali Javascript, ale iné jazyky - v~prípade technológie Flash ide o~ActionScript a~v prípade Silverlight ide o~Visual Basic, C\#, Ruby alebo Python. \textbf{V~týchto technológiach by preto bolo možné napísať aj celú našu knižnicu}, avšak nemohli by sme dosiahnuť podporu mobilných zariadení a~obe technológie vyžadujú inštaláciu rozšírení tretích strán do~prehliadača.

Hlavným dôvodom neúspechu technológie Flash a~Silverlight sa stalo odmietnutie podpory od~firmy Apple (pozri \ref{sec:mobile-support}). V~súčastnej dobe nie je podporovaný na~mobilných zaraideniach s~operačným systémom iOS, Android a~Windows Phone. Samotné Adobe už prestáva ďalej Flash podporovať a~zameriava sa radšej na~HTML5\cite{Flash_dead}.